version: '3'
services:
  eth-stats:
    image: quay.io/amis/ethstats:latest
    ports:
      - '3000:3000'
    environment:
      - WS_SECRET=bb98a0b6442386d0cdf8a31b267892c1
    restart: always
    networks:
      app_net:
        ipv4_address: 172.16.239.9
  validator-0:
    hostname: validator-0
    image: quorumengineering/quorum:2.4.0
    ports:
      - '30303:30303'
      - '8545:8545'
    volumes:
      - 0:/constellation:z
    depends_on:
      - constellation-0
    environment:
      - PRIVATE_CONFIG=/constellation/tm.conf
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /eth/geth
        echo '{"config":{"chainId":10,"homesteadBlock":0,"eip150Block":0,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":0,"eip158Block":0,"byzantiumBlock":0,"constantinopleBlock":0,"istanbul":{"epoch":30000,"policy":0,"ceil2Nby3Block":0},"txnSizeLimit":64,"maxCodeSize":0,"isQuorum":true},"nonce":"0x0","timestamp":"0x5eddfc45","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f90118f8d29445cf5ff05b5f8bf3a2a34502693a0463a072c525941b064bfe2d9da756c0f074b1d615773516bc059494c3c15b3aa2f07b74aa461d69f33d547b96d688e894bd938c68229ab0684b573ea9fb857538a370d77194276b7dc1148df4dee3bef6936053f790fd706c1e94f0f71e0d703b4b2c9176a13ae2e19919d7f32fe194749576696f2b9ff3082d8bf0146d13c39f1730f1945e9f7a50ffe8fd1f2ff5104309ef2fc9fc702fcf949c2dbd6b4ac29b7b22e22cbde1187efa6c1ae375942751b69cb5256c463396030bb735484921493a78b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0xe0000000","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","alloc":{"1b064bfe2d9da756c0f074b1d615773516bc0594":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"2751b69cb5256c463396030bb735484921493a78":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"276b7dc1148df4dee3bef6936053f790fd706c1e":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"45cf5ff05b5f8bf3a2a34502693a0463a072c525":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"5e9f7a50ffe8fd1f2ff5104309ef2fc9fc702fcf":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"749576696f2b9ff3082d8bf0146d13c39f1730f1":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9c2dbd6b4ac29b7b22e22cbde1187efa6c1ae375":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"bd938c68229ab0684b573ea9fb857538a370d771":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"c3c15b3aa2f07b74aa461d69f33d547b96d688e8":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f0f71e0d703b4b2c9176a13ae2e19919d7f32fe1":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}' > /eth/genesis.json
        echo '["enode://7d15a13f9df0c6c0dbb5844c612d7455ced4edc1c8f1e5ca12480287f5410c309de2c91d3c6212dd8f24bed91650638bc4ee371add747d2911e70b9accf1668f@172.16.239.10:30303?discport=0","enode://db310bc7e8db0e9a1c9e4a49108bbe6b425310d86f338a18b7e107c15a46e9a1ada9d19852a1f3d421ce5ba3417c39b6eccdefc2bd70b2a8e4eaca23223df9fa@172.16.239.11:30303?discport=0","enode://1810e167236af1bb4968e8673242ca6c04d9d795e3f7528bfdcd7ce747eac722cfaf4b6eb6c3ee97b6014c1c07e7e47e905643d6f95035d1bc47146d7c1984b6@172.16.239.12:30303?discport=0","enode://6fd4f3c2f6ffb3da2f23491be68ab500b1b4ebc329f41e8060f184279c1118aeaebe373bb1d4920b51ba5885c53a5814d657f2e8aa8e6f303e3663e598d418a6@172.16.239.13:30303?discport=0","enode://acea2909f779707e9609cc59985668a1baefcbce9fd138e65a3c1fbf129e885f84b8fd14b2a57a7c079aae016aed135d70e11362240c822c5c98c8f0dc0309a3@172.16.239.14:30303?discport=0","enode://306455c71f76adebd192d35b6b0341eb1956c25e1f164ea3acd5853be0587200459c8f171fb543af2571822970c5cef0aff01932655a4bedf940893c598c2fc3@172.16.239.15:30303?discport=0","enode://8d240e697d6a6f19249f56f4ba94488bcff5651ba187f3ebdb79b8ea77a7a7c568acee2a9dbc3d2cdb7aaaf1808098691849549ba90dcf674072cd963e8b5970@172.16.239.16:30303?discport=0","enode://6d2e35fabdc0b0aa79649920632ae0f71cfc3ffc18cb4770ce7259022796f75fd4a60b8436a15444cba8f983417b9fdc896aedc8f5e4a9861a1c2ec3cff1cf39@172.16.239.17:30303?discport=0","enode://17af7454def430c419f16784bba815c053841fe7f7200ee001a325202c880a2b21c2f271d11b78924659f5bc05335a920e3927a935a52fedd7e3b4465147264e@172.16.239.18:30303?discport=0","enode://bfcdd4bbaa2e8056729ca5b0c582fd88b5ab343d310d5f0a44d69e4b82f26e91c8bcea85b800021fb9333585a3b9203133f65de884a43387d3a81be5240231f6@172.16.239.19:30303?discport=0"]' > /eth/geth/static-nodes.json
        geth --datadir "/eth" init "/eth/genesis.json"
        geth \
        --identity "validator-0" \
        --rpc \
        --rpcaddr "0.0.0.0" \
        --rpcport "8545" \
        --rpccorsdomain "*" \
        --datadir "/eth" \
        --port "30303" \
        --rpcapi "db,eth,net,web3,istanbul,personal" \
        --networkid "2017" \
        --nat "any" \
        --nodekeyhex "8432aee978718d164bd798712ea4d03adb3eb9e877135864821ac1de0cf05a4f" \
        --mine \
        --debug \
        --metrics \
        --syncmode "full" \
        --ethstats "validator-0:bb98a0b6442386d0cdf8a31b267892c1@172.16.239.9:3000" \
        --gasprice 0
    networks:
      app_net:
        ipv4_address: 172.16.239.10
    restart: always
  constellation-0:
    hostname: constellation-0
    image: quorumengineering/constellation:latest
    ports:
      - '10000:10000'
    volumes:
      - 0:/constellation:z
      - .:/tmp/
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /constellation
        echo "socket=\"/constellation/tm.ipc\"\npublickeys=[\"/constellation/tm.pub\"]\n" > /constellation/tm.conf
        constellation-node --generatekeys=/constellation/tm
        cp /constellation/tm.pub /tmp/tm0.pub
        constellation-node \
          --url=http://172.16.239.100:10000/ \
          --port=10000 \
          --socket=/constellation/tm.ipc \
          --othernodes=http://172.16.239.101:10001/,http://172.16.239.102:10002/,http://172.16.239.103:10003/,http://172.16.239.104:10004/,http://172.16.239.105:10005/,http://172.16.239.106:10006/,http://172.16.239.107:10007/,http://172.16.239.108:10008/,http://172.16.239.109:10009/ \
          --publickeys=/constellation/tm.pub \
          --privatekeys=/constellation/tm.key \
          --storage=/constellation \
          --verbosity=4
    networks:
      app_net:
        ipv4_address: 172.16.239.100
    restart: always
  validator-1:
    hostname: validator-1
    image: quorumengineering/quorum:2.4.0
    ports:
      - '30304:30303'
      - '8546:8545'
    volumes:
      - 1:/constellation:z
    depends_on:
      - constellation-1
    environment:
      - PRIVATE_CONFIG=/constellation/tm.conf
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /eth/geth
        echo '{"config":{"chainId":10,"homesteadBlock":0,"eip150Block":0,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":0,"eip158Block":0,"byzantiumBlock":0,"constantinopleBlock":0,"istanbul":{"epoch":30000,"policy":0,"ceil2Nby3Block":0},"txnSizeLimit":64,"maxCodeSize":0,"isQuorum":true},"nonce":"0x0","timestamp":"0x5eddfc45","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f90118f8d29445cf5ff05b5f8bf3a2a34502693a0463a072c525941b064bfe2d9da756c0f074b1d615773516bc059494c3c15b3aa2f07b74aa461d69f33d547b96d688e894bd938c68229ab0684b573ea9fb857538a370d77194276b7dc1148df4dee3bef6936053f790fd706c1e94f0f71e0d703b4b2c9176a13ae2e19919d7f32fe194749576696f2b9ff3082d8bf0146d13c39f1730f1945e9f7a50ffe8fd1f2ff5104309ef2fc9fc702fcf949c2dbd6b4ac29b7b22e22cbde1187efa6c1ae375942751b69cb5256c463396030bb735484921493a78b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0xe0000000","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","alloc":{"1b064bfe2d9da756c0f074b1d615773516bc0594":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"2751b69cb5256c463396030bb735484921493a78":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"276b7dc1148df4dee3bef6936053f790fd706c1e":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"45cf5ff05b5f8bf3a2a34502693a0463a072c525":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"5e9f7a50ffe8fd1f2ff5104309ef2fc9fc702fcf":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"749576696f2b9ff3082d8bf0146d13c39f1730f1":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9c2dbd6b4ac29b7b22e22cbde1187efa6c1ae375":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"bd938c68229ab0684b573ea9fb857538a370d771":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"c3c15b3aa2f07b74aa461d69f33d547b96d688e8":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f0f71e0d703b4b2c9176a13ae2e19919d7f32fe1":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}' > /eth/genesis.json
        echo '["enode://7d15a13f9df0c6c0dbb5844c612d7455ced4edc1c8f1e5ca12480287f5410c309de2c91d3c6212dd8f24bed91650638bc4ee371add747d2911e70b9accf1668f@172.16.239.10:30303?discport=0","enode://db310bc7e8db0e9a1c9e4a49108bbe6b425310d86f338a18b7e107c15a46e9a1ada9d19852a1f3d421ce5ba3417c39b6eccdefc2bd70b2a8e4eaca23223df9fa@172.16.239.11:30303?discport=0","enode://1810e167236af1bb4968e8673242ca6c04d9d795e3f7528bfdcd7ce747eac722cfaf4b6eb6c3ee97b6014c1c07e7e47e905643d6f95035d1bc47146d7c1984b6@172.16.239.12:30303?discport=0","enode://6fd4f3c2f6ffb3da2f23491be68ab500b1b4ebc329f41e8060f184279c1118aeaebe373bb1d4920b51ba5885c53a5814d657f2e8aa8e6f303e3663e598d418a6@172.16.239.13:30303?discport=0","enode://acea2909f779707e9609cc59985668a1baefcbce9fd138e65a3c1fbf129e885f84b8fd14b2a57a7c079aae016aed135d70e11362240c822c5c98c8f0dc0309a3@172.16.239.14:30303?discport=0","enode://306455c71f76adebd192d35b6b0341eb1956c25e1f164ea3acd5853be0587200459c8f171fb543af2571822970c5cef0aff01932655a4bedf940893c598c2fc3@172.16.239.15:30303?discport=0","enode://8d240e697d6a6f19249f56f4ba94488bcff5651ba187f3ebdb79b8ea77a7a7c568acee2a9dbc3d2cdb7aaaf1808098691849549ba90dcf674072cd963e8b5970@172.16.239.16:30303?discport=0","enode://6d2e35fabdc0b0aa79649920632ae0f71cfc3ffc18cb4770ce7259022796f75fd4a60b8436a15444cba8f983417b9fdc896aedc8f5e4a9861a1c2ec3cff1cf39@172.16.239.17:30303?discport=0","enode://17af7454def430c419f16784bba815c053841fe7f7200ee001a325202c880a2b21c2f271d11b78924659f5bc05335a920e3927a935a52fedd7e3b4465147264e@172.16.239.18:30303?discport=0","enode://bfcdd4bbaa2e8056729ca5b0c582fd88b5ab343d310d5f0a44d69e4b82f26e91c8bcea85b800021fb9333585a3b9203133f65de884a43387d3a81be5240231f6@172.16.239.19:30303?discport=0"]' > /eth/geth/static-nodes.json
        geth --datadir "/eth" init "/eth/genesis.json"
        geth \
        --identity "validator-1" \
        --rpc \
        --rpcaddr "0.0.0.0" \
        --rpcport "8545" \
        --rpccorsdomain "*" \
        --datadir "/eth" \
        --port "30303" \
        --rpcapi "db,eth,net,web3,istanbul,personal" \
        --networkid "2017" \
        --nat "any" \
        --nodekeyhex "74bf99675aecd6fdc1322271ab6e32e4948a609727a1ad68cc46413510662d65" \
        --mine \
        --debug \
        --metrics \
        --syncmode "full" \
        --ethstats "validator-1:bb98a0b6442386d0cdf8a31b267892c1@172.16.239.9:3000" \
        --gasprice 0
    networks:
      app_net:
        ipv4_address: 172.16.239.11
    restart: always
  constellation-1:
    hostname: constellation-1
    image: quorumengineering/constellation:latest
    ports:
      - '10001:10001'
    volumes:
      - 1:/constellation:z
      - .:/tmp/
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /constellation
        echo "socket=\"/constellation/tm.ipc\"\npublickeys=[\"/constellation/tm.pub\"]\n" > /constellation/tm.conf
        constellation-node --generatekeys=/constellation/tm
        cp /constellation/tm.pub /tmp/tm1.pub
        constellation-node \
          --url=http://172.16.239.101:10001/ \
          --port=10001 \
          --socket=/constellation/tm.ipc \
          --othernodes=http://172.16.239.100:10000/,http://172.16.239.102:10002/,http://172.16.239.103:10003/,http://172.16.239.104:10004/,http://172.16.239.105:10005/,http://172.16.239.106:10006/,http://172.16.239.107:10007/,http://172.16.239.108:10008/,http://172.16.239.109:10009/ \
          --publickeys=/constellation/tm.pub \
          --privatekeys=/constellation/tm.key \
          --storage=/constellation \
          --verbosity=4
    networks:
      app_net:
        ipv4_address: 172.16.239.101
    restart: always
  validator-2:
    hostname: validator-2
    image: quorumengineering/quorum:2.4.0
    ports:
      - '30305:30303'
      - '8547:8545'
    volumes:
      - 2:/constellation:z
    depends_on:
      - constellation-2
    environment:
      - PRIVATE_CONFIG=/constellation/tm.conf
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /eth/geth
        echo '{"config":{"chainId":10,"homesteadBlock":0,"eip150Block":0,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":0,"eip158Block":0,"byzantiumBlock":0,"constantinopleBlock":0,"istanbul":{"epoch":30000,"policy":0,"ceil2Nby3Block":0},"txnSizeLimit":64,"maxCodeSize":0,"isQuorum":true},"nonce":"0x0","timestamp":"0x5eddfc45","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f90118f8d29445cf5ff05b5f8bf3a2a34502693a0463a072c525941b064bfe2d9da756c0f074b1d615773516bc059494c3c15b3aa2f07b74aa461d69f33d547b96d688e894bd938c68229ab0684b573ea9fb857538a370d77194276b7dc1148df4dee3bef6936053f790fd706c1e94f0f71e0d703b4b2c9176a13ae2e19919d7f32fe194749576696f2b9ff3082d8bf0146d13c39f1730f1945e9f7a50ffe8fd1f2ff5104309ef2fc9fc702fcf949c2dbd6b4ac29b7b22e22cbde1187efa6c1ae375942751b69cb5256c463396030bb735484921493a78b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0xe0000000","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","alloc":{"1b064bfe2d9da756c0f074b1d615773516bc0594":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"2751b69cb5256c463396030bb735484921493a78":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"276b7dc1148df4dee3bef6936053f790fd706c1e":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"45cf5ff05b5f8bf3a2a34502693a0463a072c525":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"5e9f7a50ffe8fd1f2ff5104309ef2fc9fc702fcf":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"749576696f2b9ff3082d8bf0146d13c39f1730f1":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9c2dbd6b4ac29b7b22e22cbde1187efa6c1ae375":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"bd938c68229ab0684b573ea9fb857538a370d771":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"c3c15b3aa2f07b74aa461d69f33d547b96d688e8":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f0f71e0d703b4b2c9176a13ae2e19919d7f32fe1":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}' > /eth/genesis.json
        echo '["enode://7d15a13f9df0c6c0dbb5844c612d7455ced4edc1c8f1e5ca12480287f5410c309de2c91d3c6212dd8f24bed91650638bc4ee371add747d2911e70b9accf1668f@172.16.239.10:30303?discport=0","enode://db310bc7e8db0e9a1c9e4a49108bbe6b425310d86f338a18b7e107c15a46e9a1ada9d19852a1f3d421ce5ba3417c39b6eccdefc2bd70b2a8e4eaca23223df9fa@172.16.239.11:30303?discport=0","enode://1810e167236af1bb4968e8673242ca6c04d9d795e3f7528bfdcd7ce747eac722cfaf4b6eb6c3ee97b6014c1c07e7e47e905643d6f95035d1bc47146d7c1984b6@172.16.239.12:30303?discport=0","enode://6fd4f3c2f6ffb3da2f23491be68ab500b1b4ebc329f41e8060f184279c1118aeaebe373bb1d4920b51ba5885c53a5814d657f2e8aa8e6f303e3663e598d418a6@172.16.239.13:30303?discport=0","enode://acea2909f779707e9609cc59985668a1baefcbce9fd138e65a3c1fbf129e885f84b8fd14b2a57a7c079aae016aed135d70e11362240c822c5c98c8f0dc0309a3@172.16.239.14:30303?discport=0","enode://306455c71f76adebd192d35b6b0341eb1956c25e1f164ea3acd5853be0587200459c8f171fb543af2571822970c5cef0aff01932655a4bedf940893c598c2fc3@172.16.239.15:30303?discport=0","enode://8d240e697d6a6f19249f56f4ba94488bcff5651ba187f3ebdb79b8ea77a7a7c568acee2a9dbc3d2cdb7aaaf1808098691849549ba90dcf674072cd963e8b5970@172.16.239.16:30303?discport=0","enode://6d2e35fabdc0b0aa79649920632ae0f71cfc3ffc18cb4770ce7259022796f75fd4a60b8436a15444cba8f983417b9fdc896aedc8f5e4a9861a1c2ec3cff1cf39@172.16.239.17:30303?discport=0","enode://17af7454def430c419f16784bba815c053841fe7f7200ee001a325202c880a2b21c2f271d11b78924659f5bc05335a920e3927a935a52fedd7e3b4465147264e@172.16.239.18:30303?discport=0","enode://bfcdd4bbaa2e8056729ca5b0c582fd88b5ab343d310d5f0a44d69e4b82f26e91c8bcea85b800021fb9333585a3b9203133f65de884a43387d3a81be5240231f6@172.16.239.19:30303?discport=0"]' > /eth/geth/static-nodes.json
        geth --datadir "/eth" init "/eth/genesis.json"
        geth \
        --identity "validator-2" \
        --rpc \
        --rpcaddr "0.0.0.0" \
        --rpcport "8545" \
        --rpccorsdomain "*" \
        --datadir "/eth" \
        --port "30303" \
        --rpcapi "db,eth,net,web3,istanbul,personal" \
        --networkid "2017" \
        --nat "any" \
        --nodekeyhex "c876cfdf7ae0b82d0ef6d4679cd8dd7ac2d53912c71a3a6075d15c1221af9b60" \
        --mine \
        --debug \
        --metrics \
        --syncmode "full" \
        --ethstats "validator-2:bb98a0b6442386d0cdf8a31b267892c1@172.16.239.9:3000" \
        --gasprice 0
    networks:
      app_net:
        ipv4_address: 172.16.239.12
    restart: always
  constellation-2:
    hostname: constellation-2
    image: quorumengineering/constellation:latest
    ports:
      - '10002:10002'
    volumes:
      - 2:/constellation:z
      - .:/tmp/
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /constellation
        echo "socket=\"/constellation/tm.ipc\"\npublickeys=[\"/constellation/tm.pub\"]\n" > /constellation/tm.conf
        constellation-node --generatekeys=/constellation/tm
        cp /constellation/tm.pub /tmp/tm2.pub
        constellation-node \
          --url=http://172.16.239.102:10002/ \
          --port=10002 \
          --socket=/constellation/tm.ipc \
          --othernodes=http://172.16.239.100:10000/,http://172.16.239.101:10001/,http://172.16.239.103:10003/,http://172.16.239.104:10004/,http://172.16.239.105:10005/,http://172.16.239.106:10006/,http://172.16.239.107:10007/,http://172.16.239.108:10008/,http://172.16.239.109:10009/ \
          --publickeys=/constellation/tm.pub \
          --privatekeys=/constellation/tm.key \
          --storage=/constellation \
          --verbosity=4
    networks:
      app_net:
        ipv4_address: 172.16.239.102
    restart: always
  validator-3:
    hostname: validator-3
    image: quorumengineering/quorum:2.4.0
    ports:
      - '30306:30303'
      - '8548:8545'
    volumes:
      - 3:/constellation:z
    depends_on:
      - constellation-3
    environment:
      - PRIVATE_CONFIG=/constellation/tm.conf
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /eth/geth
        echo '{"config":{"chainId":10,"homesteadBlock":0,"eip150Block":0,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":0,"eip158Block":0,"byzantiumBlock":0,"constantinopleBlock":0,"istanbul":{"epoch":30000,"policy":0,"ceil2Nby3Block":0},"txnSizeLimit":64,"maxCodeSize":0,"isQuorum":true},"nonce":"0x0","timestamp":"0x5eddfc45","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f90118f8d29445cf5ff05b5f8bf3a2a34502693a0463a072c525941b064bfe2d9da756c0f074b1d615773516bc059494c3c15b3aa2f07b74aa461d69f33d547b96d688e894bd938c68229ab0684b573ea9fb857538a370d77194276b7dc1148df4dee3bef6936053f790fd706c1e94f0f71e0d703b4b2c9176a13ae2e19919d7f32fe194749576696f2b9ff3082d8bf0146d13c39f1730f1945e9f7a50ffe8fd1f2ff5104309ef2fc9fc702fcf949c2dbd6b4ac29b7b22e22cbde1187efa6c1ae375942751b69cb5256c463396030bb735484921493a78b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0xe0000000","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","alloc":{"1b064bfe2d9da756c0f074b1d615773516bc0594":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"2751b69cb5256c463396030bb735484921493a78":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"276b7dc1148df4dee3bef6936053f790fd706c1e":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"45cf5ff05b5f8bf3a2a34502693a0463a072c525":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"5e9f7a50ffe8fd1f2ff5104309ef2fc9fc702fcf":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"749576696f2b9ff3082d8bf0146d13c39f1730f1":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9c2dbd6b4ac29b7b22e22cbde1187efa6c1ae375":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"bd938c68229ab0684b573ea9fb857538a370d771":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"c3c15b3aa2f07b74aa461d69f33d547b96d688e8":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f0f71e0d703b4b2c9176a13ae2e19919d7f32fe1":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}' > /eth/genesis.json
        echo '["enode://7d15a13f9df0c6c0dbb5844c612d7455ced4edc1c8f1e5ca12480287f5410c309de2c91d3c6212dd8f24bed91650638bc4ee371add747d2911e70b9accf1668f@172.16.239.10:30303?discport=0","enode://db310bc7e8db0e9a1c9e4a49108bbe6b425310d86f338a18b7e107c15a46e9a1ada9d19852a1f3d421ce5ba3417c39b6eccdefc2bd70b2a8e4eaca23223df9fa@172.16.239.11:30303?discport=0","enode://1810e167236af1bb4968e8673242ca6c04d9d795e3f7528bfdcd7ce747eac722cfaf4b6eb6c3ee97b6014c1c07e7e47e905643d6f95035d1bc47146d7c1984b6@172.16.239.12:30303?discport=0","enode://6fd4f3c2f6ffb3da2f23491be68ab500b1b4ebc329f41e8060f184279c1118aeaebe373bb1d4920b51ba5885c53a5814d657f2e8aa8e6f303e3663e598d418a6@172.16.239.13:30303?discport=0","enode://acea2909f779707e9609cc59985668a1baefcbce9fd138e65a3c1fbf129e885f84b8fd14b2a57a7c079aae016aed135d70e11362240c822c5c98c8f0dc0309a3@172.16.239.14:30303?discport=0","enode://306455c71f76adebd192d35b6b0341eb1956c25e1f164ea3acd5853be0587200459c8f171fb543af2571822970c5cef0aff01932655a4bedf940893c598c2fc3@172.16.239.15:30303?discport=0","enode://8d240e697d6a6f19249f56f4ba94488bcff5651ba187f3ebdb79b8ea77a7a7c568acee2a9dbc3d2cdb7aaaf1808098691849549ba90dcf674072cd963e8b5970@172.16.239.16:30303?discport=0","enode://6d2e35fabdc0b0aa79649920632ae0f71cfc3ffc18cb4770ce7259022796f75fd4a60b8436a15444cba8f983417b9fdc896aedc8f5e4a9861a1c2ec3cff1cf39@172.16.239.17:30303?discport=0","enode://17af7454def430c419f16784bba815c053841fe7f7200ee001a325202c880a2b21c2f271d11b78924659f5bc05335a920e3927a935a52fedd7e3b4465147264e@172.16.239.18:30303?discport=0","enode://bfcdd4bbaa2e8056729ca5b0c582fd88b5ab343d310d5f0a44d69e4b82f26e91c8bcea85b800021fb9333585a3b9203133f65de884a43387d3a81be5240231f6@172.16.239.19:30303?discport=0"]' > /eth/geth/static-nodes.json
        geth --datadir "/eth" init "/eth/genesis.json"
        geth \
        --identity "validator-3" \
        --rpc \
        --rpcaddr "0.0.0.0" \
        --rpcport "8545" \
        --rpccorsdomain "*" \
        --datadir "/eth" \
        --port "30303" \
        --rpcapi "db,eth,net,web3,istanbul,personal" \
        --networkid "2017" \
        --nat "any" \
        --nodekeyhex "29c1259bfdfd52d81cd0bd1a30aefff864196e3a5b3fc6b4b90c229fd8d73216" \
        --mine \
        --debug \
        --metrics \
        --syncmode "full" \
        --ethstats "validator-3:bb98a0b6442386d0cdf8a31b267892c1@172.16.239.9:3000" \
        --gasprice 0
    networks:
      app_net:
        ipv4_address: 172.16.239.13
    restart: always
  constellation-3:
    hostname: constellation-3
    image: quorumengineering/constellation:latest
    ports:
      - '10003:10003'
    volumes:
      - 3:/constellation:z
      - .:/tmp/
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /constellation
        echo "socket=\"/constellation/tm.ipc\"\npublickeys=[\"/constellation/tm.pub\"]\n" > /constellation/tm.conf
        constellation-node --generatekeys=/constellation/tm
        cp /constellation/tm.pub /tmp/tm3.pub
        constellation-node \
          --url=http://172.16.239.103:10003/ \
          --port=10003 \
          --socket=/constellation/tm.ipc \
          --othernodes=http://172.16.239.100:10000/,http://172.16.239.101:10001/,http://172.16.239.102:10002/,http://172.16.239.104:10004/,http://172.16.239.105:10005/,http://172.16.239.106:10006/,http://172.16.239.107:10007/,http://172.16.239.108:10008/,http://172.16.239.109:10009/ \
          --publickeys=/constellation/tm.pub \
          --privatekeys=/constellation/tm.key \
          --storage=/constellation \
          --verbosity=4
    networks:
      app_net:
        ipv4_address: 172.16.239.103
    restart: always
  validator-4:
    hostname: validator-4
    image: quorumengineering/quorum:2.4.0
    ports:
      - '30307:30303'
      - '8549:8545'
    volumes:
      - 4:/constellation:z
    depends_on:
      - constellation-4
    environment:
      - PRIVATE_CONFIG=/constellation/tm.conf
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /eth/geth
        echo '{"config":{"chainId":10,"homesteadBlock":0,"eip150Block":0,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":0,"eip158Block":0,"byzantiumBlock":0,"constantinopleBlock":0,"istanbul":{"epoch":30000,"policy":0,"ceil2Nby3Block":0},"txnSizeLimit":64,"maxCodeSize":0,"isQuorum":true},"nonce":"0x0","timestamp":"0x5eddfc45","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f90118f8d29445cf5ff05b5f8bf3a2a34502693a0463a072c525941b064bfe2d9da756c0f074b1d615773516bc059494c3c15b3aa2f07b74aa461d69f33d547b96d688e894bd938c68229ab0684b573ea9fb857538a370d77194276b7dc1148df4dee3bef6936053f790fd706c1e94f0f71e0d703b4b2c9176a13ae2e19919d7f32fe194749576696f2b9ff3082d8bf0146d13c39f1730f1945e9f7a50ffe8fd1f2ff5104309ef2fc9fc702fcf949c2dbd6b4ac29b7b22e22cbde1187efa6c1ae375942751b69cb5256c463396030bb735484921493a78b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0xe0000000","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","alloc":{"1b064bfe2d9da756c0f074b1d615773516bc0594":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"2751b69cb5256c463396030bb735484921493a78":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"276b7dc1148df4dee3bef6936053f790fd706c1e":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"45cf5ff05b5f8bf3a2a34502693a0463a072c525":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"5e9f7a50ffe8fd1f2ff5104309ef2fc9fc702fcf":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"749576696f2b9ff3082d8bf0146d13c39f1730f1":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9c2dbd6b4ac29b7b22e22cbde1187efa6c1ae375":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"bd938c68229ab0684b573ea9fb857538a370d771":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"c3c15b3aa2f07b74aa461d69f33d547b96d688e8":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f0f71e0d703b4b2c9176a13ae2e19919d7f32fe1":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}' > /eth/genesis.json
        echo '["enode://7d15a13f9df0c6c0dbb5844c612d7455ced4edc1c8f1e5ca12480287f5410c309de2c91d3c6212dd8f24bed91650638bc4ee371add747d2911e70b9accf1668f@172.16.239.10:30303?discport=0","enode://db310bc7e8db0e9a1c9e4a49108bbe6b425310d86f338a18b7e107c15a46e9a1ada9d19852a1f3d421ce5ba3417c39b6eccdefc2bd70b2a8e4eaca23223df9fa@172.16.239.11:30303?discport=0","enode://1810e167236af1bb4968e8673242ca6c04d9d795e3f7528bfdcd7ce747eac722cfaf4b6eb6c3ee97b6014c1c07e7e47e905643d6f95035d1bc47146d7c1984b6@172.16.239.12:30303?discport=0","enode://6fd4f3c2f6ffb3da2f23491be68ab500b1b4ebc329f41e8060f184279c1118aeaebe373bb1d4920b51ba5885c53a5814d657f2e8aa8e6f303e3663e598d418a6@172.16.239.13:30303?discport=0","enode://acea2909f779707e9609cc59985668a1baefcbce9fd138e65a3c1fbf129e885f84b8fd14b2a57a7c079aae016aed135d70e11362240c822c5c98c8f0dc0309a3@172.16.239.14:30303?discport=0","enode://306455c71f76adebd192d35b6b0341eb1956c25e1f164ea3acd5853be0587200459c8f171fb543af2571822970c5cef0aff01932655a4bedf940893c598c2fc3@172.16.239.15:30303?discport=0","enode://8d240e697d6a6f19249f56f4ba94488bcff5651ba187f3ebdb79b8ea77a7a7c568acee2a9dbc3d2cdb7aaaf1808098691849549ba90dcf674072cd963e8b5970@172.16.239.16:30303?discport=0","enode://6d2e35fabdc0b0aa79649920632ae0f71cfc3ffc18cb4770ce7259022796f75fd4a60b8436a15444cba8f983417b9fdc896aedc8f5e4a9861a1c2ec3cff1cf39@172.16.239.17:30303?discport=0","enode://17af7454def430c419f16784bba815c053841fe7f7200ee001a325202c880a2b21c2f271d11b78924659f5bc05335a920e3927a935a52fedd7e3b4465147264e@172.16.239.18:30303?discport=0","enode://bfcdd4bbaa2e8056729ca5b0c582fd88b5ab343d310d5f0a44d69e4b82f26e91c8bcea85b800021fb9333585a3b9203133f65de884a43387d3a81be5240231f6@172.16.239.19:30303?discport=0"]' > /eth/geth/static-nodes.json
        geth --datadir "/eth" init "/eth/genesis.json"
        geth \
        --identity "validator-4" \
        --rpc \
        --rpcaddr "0.0.0.0" \
        --rpcport "8545" \
        --rpccorsdomain "*" \
        --datadir "/eth" \
        --port "30303" \
        --rpcapi "db,eth,net,web3,istanbul,personal" \
        --networkid "2017" \
        --nat "any" \
        --nodekeyhex "ab42f184edfd58d147cba24611a8304d8032d2e127af88f5618fa74b8cb79f45" \
        --mine \
        --debug \
        --metrics \
        --syncmode "full" \
        --ethstats "validator-4:bb98a0b6442386d0cdf8a31b267892c1@172.16.239.9:3000" \
        --gasprice 0
    networks:
      app_net:
        ipv4_address: 172.16.239.14
    restart: always
  constellation-4:
    hostname: constellation-4
    image: quorumengineering/constellation:latest
    ports:
      - '10004:10004'
    volumes:
      - 4:/constellation:z
      - .:/tmp/
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /constellation
        echo "socket=\"/constellation/tm.ipc\"\npublickeys=[\"/constellation/tm.pub\"]\n" > /constellation/tm.conf
        constellation-node --generatekeys=/constellation/tm
        cp /constellation/tm.pub /tmp/tm4.pub
        constellation-node \
          --url=http://172.16.239.104:10004/ \
          --port=10004 \
          --socket=/constellation/tm.ipc \
          --othernodes=http://172.16.239.100:10000/,http://172.16.239.101:10001/,http://172.16.239.102:10002/,http://172.16.239.103:10003/,http://172.16.239.105:10005/,http://172.16.239.106:10006/,http://172.16.239.107:10007/,http://172.16.239.108:10008/,http://172.16.239.109:10009/ \
          --publickeys=/constellation/tm.pub \
          --privatekeys=/constellation/tm.key \
          --storage=/constellation \
          --verbosity=4
    networks:
      app_net:
        ipv4_address: 172.16.239.104
    restart: always
  validator-5:
    hostname: validator-5
    image: quorumengineering/quorum:2.4.0
    ports:
      - '30308:30303'
      - '8550:8545'
    volumes:
      - 5:/constellation:z
    depends_on:
      - constellation-5
    environment:
      - PRIVATE_CONFIG=/constellation/tm.conf
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /eth/geth
        echo '{"config":{"chainId":10,"homesteadBlock":0,"eip150Block":0,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":0,"eip158Block":0,"byzantiumBlock":0,"constantinopleBlock":0,"istanbul":{"epoch":30000,"policy":0,"ceil2Nby3Block":0},"txnSizeLimit":64,"maxCodeSize":0,"isQuorum":true},"nonce":"0x0","timestamp":"0x5eddfc45","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f90118f8d29445cf5ff05b5f8bf3a2a34502693a0463a072c525941b064bfe2d9da756c0f074b1d615773516bc059494c3c15b3aa2f07b74aa461d69f33d547b96d688e894bd938c68229ab0684b573ea9fb857538a370d77194276b7dc1148df4dee3bef6936053f790fd706c1e94f0f71e0d703b4b2c9176a13ae2e19919d7f32fe194749576696f2b9ff3082d8bf0146d13c39f1730f1945e9f7a50ffe8fd1f2ff5104309ef2fc9fc702fcf949c2dbd6b4ac29b7b22e22cbde1187efa6c1ae375942751b69cb5256c463396030bb735484921493a78b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0xe0000000","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","alloc":{"1b064bfe2d9da756c0f074b1d615773516bc0594":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"2751b69cb5256c463396030bb735484921493a78":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"276b7dc1148df4dee3bef6936053f790fd706c1e":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"45cf5ff05b5f8bf3a2a34502693a0463a072c525":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"5e9f7a50ffe8fd1f2ff5104309ef2fc9fc702fcf":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"749576696f2b9ff3082d8bf0146d13c39f1730f1":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9c2dbd6b4ac29b7b22e22cbde1187efa6c1ae375":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"bd938c68229ab0684b573ea9fb857538a370d771":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"c3c15b3aa2f07b74aa461d69f33d547b96d688e8":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f0f71e0d703b4b2c9176a13ae2e19919d7f32fe1":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}' > /eth/genesis.json
        echo '["enode://7d15a13f9df0c6c0dbb5844c612d7455ced4edc1c8f1e5ca12480287f5410c309de2c91d3c6212dd8f24bed91650638bc4ee371add747d2911e70b9accf1668f@172.16.239.10:30303?discport=0","enode://db310bc7e8db0e9a1c9e4a49108bbe6b425310d86f338a18b7e107c15a46e9a1ada9d19852a1f3d421ce5ba3417c39b6eccdefc2bd70b2a8e4eaca23223df9fa@172.16.239.11:30303?discport=0","enode://1810e167236af1bb4968e8673242ca6c04d9d795e3f7528bfdcd7ce747eac722cfaf4b6eb6c3ee97b6014c1c07e7e47e905643d6f95035d1bc47146d7c1984b6@172.16.239.12:30303?discport=0","enode://6fd4f3c2f6ffb3da2f23491be68ab500b1b4ebc329f41e8060f184279c1118aeaebe373bb1d4920b51ba5885c53a5814d657f2e8aa8e6f303e3663e598d418a6@172.16.239.13:30303?discport=0","enode://acea2909f779707e9609cc59985668a1baefcbce9fd138e65a3c1fbf129e885f84b8fd14b2a57a7c079aae016aed135d70e11362240c822c5c98c8f0dc0309a3@172.16.239.14:30303?discport=0","enode://306455c71f76adebd192d35b6b0341eb1956c25e1f164ea3acd5853be0587200459c8f171fb543af2571822970c5cef0aff01932655a4bedf940893c598c2fc3@172.16.239.15:30303?discport=0","enode://8d240e697d6a6f19249f56f4ba94488bcff5651ba187f3ebdb79b8ea77a7a7c568acee2a9dbc3d2cdb7aaaf1808098691849549ba90dcf674072cd963e8b5970@172.16.239.16:30303?discport=0","enode://6d2e35fabdc0b0aa79649920632ae0f71cfc3ffc18cb4770ce7259022796f75fd4a60b8436a15444cba8f983417b9fdc896aedc8f5e4a9861a1c2ec3cff1cf39@172.16.239.17:30303?discport=0","enode://17af7454def430c419f16784bba815c053841fe7f7200ee001a325202c880a2b21c2f271d11b78924659f5bc05335a920e3927a935a52fedd7e3b4465147264e@172.16.239.18:30303?discport=0","enode://bfcdd4bbaa2e8056729ca5b0c582fd88b5ab343d310d5f0a44d69e4b82f26e91c8bcea85b800021fb9333585a3b9203133f65de884a43387d3a81be5240231f6@172.16.239.19:30303?discport=0"]' > /eth/geth/static-nodes.json
        geth --datadir "/eth" init "/eth/genesis.json"
        geth \
        --identity "validator-5" \
        --rpc \
        --rpcaddr "0.0.0.0" \
        --rpcport "8545" \
        --rpccorsdomain "*" \
        --datadir "/eth" \
        --port "30303" \
        --rpcapi "db,eth,net,web3,istanbul,personal" \
        --networkid "2017" \
        --nat "any" \
        --nodekeyhex "bb5609e19039d3858cd110d744a18f6ee53b4b29df71e1705646293bc40e67e4" \
        --mine \
        --debug \
        --metrics \
        --syncmode "full" \
        --ethstats "validator-5:bb98a0b6442386d0cdf8a31b267892c1@172.16.239.9:3000" \
        --gasprice 0
    networks:
      app_net:
        ipv4_address: 172.16.239.15
    restart: always
  constellation-5:
    hostname: constellation-5
    image: quorumengineering/constellation:latest
    ports:
      - '10005:10005'
    volumes:
      - 5:/constellation:z
      - .:/tmp/
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /constellation
        echo "socket=\"/constellation/tm.ipc\"\npublickeys=[\"/constellation/tm.pub\"]\n" > /constellation/tm.conf
        constellation-node --generatekeys=/constellation/tm
        cp /constellation/tm.pub /tmp/tm5.pub
        constellation-node \
          --url=http://172.16.239.105:10005/ \
          --port=10005 \
          --socket=/constellation/tm.ipc \
          --othernodes=http://172.16.239.100:10000/,http://172.16.239.101:10001/,http://172.16.239.102:10002/,http://172.16.239.103:10003/,http://172.16.239.104:10004/,http://172.16.239.106:10006/,http://172.16.239.107:10007/,http://172.16.239.108:10008/,http://172.16.239.109:10009/ \
          --publickeys=/constellation/tm.pub \
          --privatekeys=/constellation/tm.key \
          --storage=/constellation \
          --verbosity=4
    networks:
      app_net:
        ipv4_address: 172.16.239.105
    restart: always
  validator-6:
    hostname: validator-6
    image: quorumengineering/quorum:2.4.0
    ports:
      - '30309:30303'
      - '8551:8545'
    volumes:
      - 6:/constellation:z
    depends_on:
      - constellation-6
    environment:
      - PRIVATE_CONFIG=/constellation/tm.conf
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /eth/geth
        echo '{"config":{"chainId":10,"homesteadBlock":0,"eip150Block":0,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":0,"eip158Block":0,"byzantiumBlock":0,"constantinopleBlock":0,"istanbul":{"epoch":30000,"policy":0,"ceil2Nby3Block":0},"txnSizeLimit":64,"maxCodeSize":0,"isQuorum":true},"nonce":"0x0","timestamp":"0x5eddfc45","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f90118f8d29445cf5ff05b5f8bf3a2a34502693a0463a072c525941b064bfe2d9da756c0f074b1d615773516bc059494c3c15b3aa2f07b74aa461d69f33d547b96d688e894bd938c68229ab0684b573ea9fb857538a370d77194276b7dc1148df4dee3bef6936053f790fd706c1e94f0f71e0d703b4b2c9176a13ae2e19919d7f32fe194749576696f2b9ff3082d8bf0146d13c39f1730f1945e9f7a50ffe8fd1f2ff5104309ef2fc9fc702fcf949c2dbd6b4ac29b7b22e22cbde1187efa6c1ae375942751b69cb5256c463396030bb735484921493a78b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0xe0000000","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","alloc":{"1b064bfe2d9da756c0f074b1d615773516bc0594":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"2751b69cb5256c463396030bb735484921493a78":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"276b7dc1148df4dee3bef6936053f790fd706c1e":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"45cf5ff05b5f8bf3a2a34502693a0463a072c525":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"5e9f7a50ffe8fd1f2ff5104309ef2fc9fc702fcf":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"749576696f2b9ff3082d8bf0146d13c39f1730f1":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9c2dbd6b4ac29b7b22e22cbde1187efa6c1ae375":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"bd938c68229ab0684b573ea9fb857538a370d771":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"c3c15b3aa2f07b74aa461d69f33d547b96d688e8":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f0f71e0d703b4b2c9176a13ae2e19919d7f32fe1":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}' > /eth/genesis.json
        echo '["enode://7d15a13f9df0c6c0dbb5844c612d7455ced4edc1c8f1e5ca12480287f5410c309de2c91d3c6212dd8f24bed91650638bc4ee371add747d2911e70b9accf1668f@172.16.239.10:30303?discport=0","enode://db310bc7e8db0e9a1c9e4a49108bbe6b425310d86f338a18b7e107c15a46e9a1ada9d19852a1f3d421ce5ba3417c39b6eccdefc2bd70b2a8e4eaca23223df9fa@172.16.239.11:30303?discport=0","enode://1810e167236af1bb4968e8673242ca6c04d9d795e3f7528bfdcd7ce747eac722cfaf4b6eb6c3ee97b6014c1c07e7e47e905643d6f95035d1bc47146d7c1984b6@172.16.239.12:30303?discport=0","enode://6fd4f3c2f6ffb3da2f23491be68ab500b1b4ebc329f41e8060f184279c1118aeaebe373bb1d4920b51ba5885c53a5814d657f2e8aa8e6f303e3663e598d418a6@172.16.239.13:30303?discport=0","enode://acea2909f779707e9609cc59985668a1baefcbce9fd138e65a3c1fbf129e885f84b8fd14b2a57a7c079aae016aed135d70e11362240c822c5c98c8f0dc0309a3@172.16.239.14:30303?discport=0","enode://306455c71f76adebd192d35b6b0341eb1956c25e1f164ea3acd5853be0587200459c8f171fb543af2571822970c5cef0aff01932655a4bedf940893c598c2fc3@172.16.239.15:30303?discport=0","enode://8d240e697d6a6f19249f56f4ba94488bcff5651ba187f3ebdb79b8ea77a7a7c568acee2a9dbc3d2cdb7aaaf1808098691849549ba90dcf674072cd963e8b5970@172.16.239.16:30303?discport=0","enode://6d2e35fabdc0b0aa79649920632ae0f71cfc3ffc18cb4770ce7259022796f75fd4a60b8436a15444cba8f983417b9fdc896aedc8f5e4a9861a1c2ec3cff1cf39@172.16.239.17:30303?discport=0","enode://17af7454def430c419f16784bba815c053841fe7f7200ee001a325202c880a2b21c2f271d11b78924659f5bc05335a920e3927a935a52fedd7e3b4465147264e@172.16.239.18:30303?discport=0","enode://bfcdd4bbaa2e8056729ca5b0c582fd88b5ab343d310d5f0a44d69e4b82f26e91c8bcea85b800021fb9333585a3b9203133f65de884a43387d3a81be5240231f6@172.16.239.19:30303?discport=0"]' > /eth/geth/static-nodes.json
        geth --datadir "/eth" init "/eth/genesis.json"
        geth \
        --identity "validator-6" \
        --rpc \
        --rpcaddr "0.0.0.0" \
        --rpcport "8545" \
        --rpccorsdomain "*" \
        --datadir "/eth" \
        --port "30303" \
        --rpcapi "db,eth,net,web3,istanbul,personal" \
        --networkid "2017" \
        --nat "any" \
        --nodekeyhex "a85cb3acc2efc4cc135c90e49a1b9cc3d5a533289955cdaaf3e15b105f2a4acb" \
        --mine \
        --debug \
        --metrics \
        --syncmode "full" \
        --ethstats "validator-6:bb98a0b6442386d0cdf8a31b267892c1@172.16.239.9:3000" \
        --gasprice 0
    networks:
      app_net:
        ipv4_address: 172.16.239.16
    restart: always
  constellation-6:
    hostname: constellation-6
    image: quorumengineering/constellation:latest
    ports:
      - '10006:10006'
    volumes:
      - 6:/constellation:z
      - .:/tmp/
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /constellation
        echo "socket=\"/constellation/tm.ipc\"\npublickeys=[\"/constellation/tm.pub\"]\n" > /constellation/tm.conf
        constellation-node --generatekeys=/constellation/tm
        cp /constellation/tm.pub /tmp/tm6.pub
        constellation-node \
          --url=http://172.16.239.106:10006/ \
          --port=10006 \
          --socket=/constellation/tm.ipc \
          --othernodes=http://172.16.239.100:10000/,http://172.16.239.101:10001/,http://172.16.239.102:10002/,http://172.16.239.103:10003/,http://172.16.239.104:10004/,http://172.16.239.105:10005/,http://172.16.239.107:10007/,http://172.16.239.108:10008/,http://172.16.239.109:10009/ \
          --publickeys=/constellation/tm.pub \
          --privatekeys=/constellation/tm.key \
          --storage=/constellation \
          --verbosity=4
    networks:
      app_net:
        ipv4_address: 172.16.239.106
    restart: always
  validator-7:
    hostname: validator-7
    image: quorumengineering/quorum:2.4.0
    ports:
      - '30310:30303'
      - '8552:8545'
    volumes:
      - 7:/constellation:z
    depends_on:
      - constellation-7
    environment:
      - PRIVATE_CONFIG=/constellation/tm.conf
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /eth/geth
        echo '{"config":{"chainId":10,"homesteadBlock":0,"eip150Block":0,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":0,"eip158Block":0,"byzantiumBlock":0,"constantinopleBlock":0,"istanbul":{"epoch":30000,"policy":0,"ceil2Nby3Block":0},"txnSizeLimit":64,"maxCodeSize":0,"isQuorum":true},"nonce":"0x0","timestamp":"0x5eddfc45","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f90118f8d29445cf5ff05b5f8bf3a2a34502693a0463a072c525941b064bfe2d9da756c0f074b1d615773516bc059494c3c15b3aa2f07b74aa461d69f33d547b96d688e894bd938c68229ab0684b573ea9fb857538a370d77194276b7dc1148df4dee3bef6936053f790fd706c1e94f0f71e0d703b4b2c9176a13ae2e19919d7f32fe194749576696f2b9ff3082d8bf0146d13c39f1730f1945e9f7a50ffe8fd1f2ff5104309ef2fc9fc702fcf949c2dbd6b4ac29b7b22e22cbde1187efa6c1ae375942751b69cb5256c463396030bb735484921493a78b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0xe0000000","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","alloc":{"1b064bfe2d9da756c0f074b1d615773516bc0594":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"2751b69cb5256c463396030bb735484921493a78":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"276b7dc1148df4dee3bef6936053f790fd706c1e":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"45cf5ff05b5f8bf3a2a34502693a0463a072c525":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"5e9f7a50ffe8fd1f2ff5104309ef2fc9fc702fcf":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"749576696f2b9ff3082d8bf0146d13c39f1730f1":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9c2dbd6b4ac29b7b22e22cbde1187efa6c1ae375":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"bd938c68229ab0684b573ea9fb857538a370d771":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"c3c15b3aa2f07b74aa461d69f33d547b96d688e8":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f0f71e0d703b4b2c9176a13ae2e19919d7f32fe1":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}' > /eth/genesis.json
        echo '["enode://7d15a13f9df0c6c0dbb5844c612d7455ced4edc1c8f1e5ca12480287f5410c309de2c91d3c6212dd8f24bed91650638bc4ee371add747d2911e70b9accf1668f@172.16.239.10:30303?discport=0","enode://db310bc7e8db0e9a1c9e4a49108bbe6b425310d86f338a18b7e107c15a46e9a1ada9d19852a1f3d421ce5ba3417c39b6eccdefc2bd70b2a8e4eaca23223df9fa@172.16.239.11:30303?discport=0","enode://1810e167236af1bb4968e8673242ca6c04d9d795e3f7528bfdcd7ce747eac722cfaf4b6eb6c3ee97b6014c1c07e7e47e905643d6f95035d1bc47146d7c1984b6@172.16.239.12:30303?discport=0","enode://6fd4f3c2f6ffb3da2f23491be68ab500b1b4ebc329f41e8060f184279c1118aeaebe373bb1d4920b51ba5885c53a5814d657f2e8aa8e6f303e3663e598d418a6@172.16.239.13:30303?discport=0","enode://acea2909f779707e9609cc59985668a1baefcbce9fd138e65a3c1fbf129e885f84b8fd14b2a57a7c079aae016aed135d70e11362240c822c5c98c8f0dc0309a3@172.16.239.14:30303?discport=0","enode://306455c71f76adebd192d35b6b0341eb1956c25e1f164ea3acd5853be0587200459c8f171fb543af2571822970c5cef0aff01932655a4bedf940893c598c2fc3@172.16.239.15:30303?discport=0","enode://8d240e697d6a6f19249f56f4ba94488bcff5651ba187f3ebdb79b8ea77a7a7c568acee2a9dbc3d2cdb7aaaf1808098691849549ba90dcf674072cd963e8b5970@172.16.239.16:30303?discport=0","enode://6d2e35fabdc0b0aa79649920632ae0f71cfc3ffc18cb4770ce7259022796f75fd4a60b8436a15444cba8f983417b9fdc896aedc8f5e4a9861a1c2ec3cff1cf39@172.16.239.17:30303?discport=0","enode://17af7454def430c419f16784bba815c053841fe7f7200ee001a325202c880a2b21c2f271d11b78924659f5bc05335a920e3927a935a52fedd7e3b4465147264e@172.16.239.18:30303?discport=0","enode://bfcdd4bbaa2e8056729ca5b0c582fd88b5ab343d310d5f0a44d69e4b82f26e91c8bcea85b800021fb9333585a3b9203133f65de884a43387d3a81be5240231f6@172.16.239.19:30303?discport=0"]' > /eth/geth/static-nodes.json
        geth --datadir "/eth" init "/eth/genesis.json"
        geth \
        --identity "validator-7" \
        --rpc \
        --rpcaddr "0.0.0.0" \
        --rpcport "8545" \
        --rpccorsdomain "*" \
        --datadir "/eth" \
        --port "30303" \
        --rpcapi "db,eth,net,web3,istanbul,personal" \
        --networkid "2017" \
        --nat "any" \
        --nodekeyhex "7f55a199f7a33244635661433cd25e143733a38ac0c9d1e55b35bed015685761" \
        --mine \
        --debug \
        --metrics \
        --syncmode "full" \
        --ethstats "validator-7:bb98a0b6442386d0cdf8a31b267892c1@172.16.239.9:3000" \
        --gasprice 0
    networks:
      app_net:
        ipv4_address: 172.16.239.17
    restart: always
  constellation-7:
    hostname: constellation-7
    image: quorumengineering/constellation:latest
    ports:
      - '10007:10007'
    volumes:
      - 7:/constellation:z
      - .:/tmp/
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /constellation
        echo "socket=\"/constellation/tm.ipc\"\npublickeys=[\"/constellation/tm.pub\"]\n" > /constellation/tm.conf
        constellation-node --generatekeys=/constellation/tm
        cp /constellation/tm.pub /tmp/tm7.pub
        constellation-node \
          --url=http://172.16.239.107:10007/ \
          --port=10007 \
          --socket=/constellation/tm.ipc \
          --othernodes=http://172.16.239.100:10000/,http://172.16.239.101:10001/,http://172.16.239.102:10002/,http://172.16.239.103:10003/,http://172.16.239.104:10004/,http://172.16.239.105:10005/,http://172.16.239.106:10006/,http://172.16.239.108:10008/,http://172.16.239.109:10009/ \
          --publickeys=/constellation/tm.pub \
          --privatekeys=/constellation/tm.key \
          --storage=/constellation \
          --verbosity=4
    networks:
      app_net:
        ipv4_address: 172.16.239.107
    restart: always
  validator-8:
    hostname: validator-8
    image: quorumengineering/quorum:2.4.0
    ports:
      - '30311:30303'
      - '8553:8545'
    volumes:
      - 8:/constellation:z
    depends_on:
      - constellation-8
    environment:
      - PRIVATE_CONFIG=/constellation/tm.conf
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /eth/geth
        echo '{"config":{"chainId":10,"homesteadBlock":0,"eip150Block":0,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":0,"eip158Block":0,"byzantiumBlock":0,"constantinopleBlock":0,"istanbul":{"epoch":30000,"policy":0,"ceil2Nby3Block":0},"txnSizeLimit":64,"maxCodeSize":0,"isQuorum":true},"nonce":"0x0","timestamp":"0x5eddfc45","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f90118f8d29445cf5ff05b5f8bf3a2a34502693a0463a072c525941b064bfe2d9da756c0f074b1d615773516bc059494c3c15b3aa2f07b74aa461d69f33d547b96d688e894bd938c68229ab0684b573ea9fb857538a370d77194276b7dc1148df4dee3bef6936053f790fd706c1e94f0f71e0d703b4b2c9176a13ae2e19919d7f32fe194749576696f2b9ff3082d8bf0146d13c39f1730f1945e9f7a50ffe8fd1f2ff5104309ef2fc9fc702fcf949c2dbd6b4ac29b7b22e22cbde1187efa6c1ae375942751b69cb5256c463396030bb735484921493a78b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0xe0000000","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","alloc":{"1b064bfe2d9da756c0f074b1d615773516bc0594":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"2751b69cb5256c463396030bb735484921493a78":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"276b7dc1148df4dee3bef6936053f790fd706c1e":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"45cf5ff05b5f8bf3a2a34502693a0463a072c525":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"5e9f7a50ffe8fd1f2ff5104309ef2fc9fc702fcf":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"749576696f2b9ff3082d8bf0146d13c39f1730f1":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9c2dbd6b4ac29b7b22e22cbde1187efa6c1ae375":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"bd938c68229ab0684b573ea9fb857538a370d771":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"c3c15b3aa2f07b74aa461d69f33d547b96d688e8":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f0f71e0d703b4b2c9176a13ae2e19919d7f32fe1":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}' > /eth/genesis.json
        echo '["enode://7d15a13f9df0c6c0dbb5844c612d7455ced4edc1c8f1e5ca12480287f5410c309de2c91d3c6212dd8f24bed91650638bc4ee371add747d2911e70b9accf1668f@172.16.239.10:30303?discport=0","enode://db310bc7e8db0e9a1c9e4a49108bbe6b425310d86f338a18b7e107c15a46e9a1ada9d19852a1f3d421ce5ba3417c39b6eccdefc2bd70b2a8e4eaca23223df9fa@172.16.239.11:30303?discport=0","enode://1810e167236af1bb4968e8673242ca6c04d9d795e3f7528bfdcd7ce747eac722cfaf4b6eb6c3ee97b6014c1c07e7e47e905643d6f95035d1bc47146d7c1984b6@172.16.239.12:30303?discport=0","enode://6fd4f3c2f6ffb3da2f23491be68ab500b1b4ebc329f41e8060f184279c1118aeaebe373bb1d4920b51ba5885c53a5814d657f2e8aa8e6f303e3663e598d418a6@172.16.239.13:30303?discport=0","enode://acea2909f779707e9609cc59985668a1baefcbce9fd138e65a3c1fbf129e885f84b8fd14b2a57a7c079aae016aed135d70e11362240c822c5c98c8f0dc0309a3@172.16.239.14:30303?discport=0","enode://306455c71f76adebd192d35b6b0341eb1956c25e1f164ea3acd5853be0587200459c8f171fb543af2571822970c5cef0aff01932655a4bedf940893c598c2fc3@172.16.239.15:30303?discport=0","enode://8d240e697d6a6f19249f56f4ba94488bcff5651ba187f3ebdb79b8ea77a7a7c568acee2a9dbc3d2cdb7aaaf1808098691849549ba90dcf674072cd963e8b5970@172.16.239.16:30303?discport=0","enode://6d2e35fabdc0b0aa79649920632ae0f71cfc3ffc18cb4770ce7259022796f75fd4a60b8436a15444cba8f983417b9fdc896aedc8f5e4a9861a1c2ec3cff1cf39@172.16.239.17:30303?discport=0","enode://17af7454def430c419f16784bba815c053841fe7f7200ee001a325202c880a2b21c2f271d11b78924659f5bc05335a920e3927a935a52fedd7e3b4465147264e@172.16.239.18:30303?discport=0","enode://bfcdd4bbaa2e8056729ca5b0c582fd88b5ab343d310d5f0a44d69e4b82f26e91c8bcea85b800021fb9333585a3b9203133f65de884a43387d3a81be5240231f6@172.16.239.19:30303?discport=0"]' > /eth/geth/static-nodes.json
        geth --datadir "/eth" init "/eth/genesis.json"
        geth \
        --identity "validator-8" \
        --rpc \
        --rpcaddr "0.0.0.0" \
        --rpcport "8545" \
        --rpccorsdomain "*" \
        --datadir "/eth" \
        --port "30303" \
        --rpcapi "db,eth,net,web3,istanbul,personal" \
        --networkid "2017" \
        --nat "any" \
        --nodekeyhex "2a465261601e4f71afc9ffe73ac85a9c21b14497bfb253046285832fa72c1dd2" \
        --mine \
        --debug \
        --metrics \
        --syncmode "full" \
        --ethstats "validator-8:bb98a0b6442386d0cdf8a31b267892c1@172.16.239.9:3000" \
        --gasprice 0
    networks:
      app_net:
        ipv4_address: 172.16.239.18
    restart: always
  constellation-8:
    hostname: constellation-8
    image: quorumengineering/constellation:latest
    ports:
      - '10008:10008'
    volumes:
      - 8:/constellation:z
      - .:/tmp/
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /constellation
        echo "socket=\"/constellation/tm.ipc\"\npublickeys=[\"/constellation/tm.pub\"]\n" > /constellation/tm.conf
        constellation-node --generatekeys=/constellation/tm
        cp /constellation/tm.pub /tmp/tm8.pub
        constellation-node \
          --url=http://172.16.239.108:10008/ \
          --port=10008 \
          --socket=/constellation/tm.ipc \
          --othernodes=http://172.16.239.100:10000/,http://172.16.239.101:10001/,http://172.16.239.102:10002/,http://172.16.239.103:10003/,http://172.16.239.104:10004/,http://172.16.239.105:10005/,http://172.16.239.106:10006/,http://172.16.239.107:10007/,http://172.16.239.109:10009/ \
          --publickeys=/constellation/tm.pub \
          --privatekeys=/constellation/tm.key \
          --storage=/constellation \
          --verbosity=4
    networks:
      app_net:
        ipv4_address: 172.16.239.108
    restart: always
  validator-9:
    hostname: validator-9
    image: quorumengineering/quorum:2.4.0
    ports:
      - '30312:30303'
      - '8554:8545'
    volumes:
      - 9:/constellation:z
    depends_on:
      - constellation-9
    environment:
      - PRIVATE_CONFIG=/constellation/tm.conf
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /eth/geth
        echo '{"config":{"chainId":10,"homesteadBlock":0,"eip150Block":0,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":0,"eip158Block":0,"byzantiumBlock":0,"constantinopleBlock":0,"istanbul":{"epoch":30000,"policy":0,"ceil2Nby3Block":0},"txnSizeLimit":64,"maxCodeSize":0,"isQuorum":true},"nonce":"0x0","timestamp":"0x5eddfc45","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f90118f8d29445cf5ff05b5f8bf3a2a34502693a0463a072c525941b064bfe2d9da756c0f074b1d615773516bc059494c3c15b3aa2f07b74aa461d69f33d547b96d688e894bd938c68229ab0684b573ea9fb857538a370d77194276b7dc1148df4dee3bef6936053f790fd706c1e94f0f71e0d703b4b2c9176a13ae2e19919d7f32fe194749576696f2b9ff3082d8bf0146d13c39f1730f1945e9f7a50ffe8fd1f2ff5104309ef2fc9fc702fcf949c2dbd6b4ac29b7b22e22cbde1187efa6c1ae375942751b69cb5256c463396030bb735484921493a78b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0xe0000000","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","alloc":{"1b064bfe2d9da756c0f074b1d615773516bc0594":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"2751b69cb5256c463396030bb735484921493a78":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"276b7dc1148df4dee3bef6936053f790fd706c1e":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"45cf5ff05b5f8bf3a2a34502693a0463a072c525":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"5e9f7a50ffe8fd1f2ff5104309ef2fc9fc702fcf":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"749576696f2b9ff3082d8bf0146d13c39f1730f1":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9c2dbd6b4ac29b7b22e22cbde1187efa6c1ae375":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"bd938c68229ab0684b573ea9fb857538a370d771":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"c3c15b3aa2f07b74aa461d69f33d547b96d688e8":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f0f71e0d703b4b2c9176a13ae2e19919d7f32fe1":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}' > /eth/genesis.json
        echo '["enode://7d15a13f9df0c6c0dbb5844c612d7455ced4edc1c8f1e5ca12480287f5410c309de2c91d3c6212dd8f24bed91650638bc4ee371add747d2911e70b9accf1668f@172.16.239.10:30303?discport=0","enode://db310bc7e8db0e9a1c9e4a49108bbe6b425310d86f338a18b7e107c15a46e9a1ada9d19852a1f3d421ce5ba3417c39b6eccdefc2bd70b2a8e4eaca23223df9fa@172.16.239.11:30303?discport=0","enode://1810e167236af1bb4968e8673242ca6c04d9d795e3f7528bfdcd7ce747eac722cfaf4b6eb6c3ee97b6014c1c07e7e47e905643d6f95035d1bc47146d7c1984b6@172.16.239.12:30303?discport=0","enode://6fd4f3c2f6ffb3da2f23491be68ab500b1b4ebc329f41e8060f184279c1118aeaebe373bb1d4920b51ba5885c53a5814d657f2e8aa8e6f303e3663e598d418a6@172.16.239.13:30303?discport=0","enode://acea2909f779707e9609cc59985668a1baefcbce9fd138e65a3c1fbf129e885f84b8fd14b2a57a7c079aae016aed135d70e11362240c822c5c98c8f0dc0309a3@172.16.239.14:30303?discport=0","enode://306455c71f76adebd192d35b6b0341eb1956c25e1f164ea3acd5853be0587200459c8f171fb543af2571822970c5cef0aff01932655a4bedf940893c598c2fc3@172.16.239.15:30303?discport=0","enode://8d240e697d6a6f19249f56f4ba94488bcff5651ba187f3ebdb79b8ea77a7a7c568acee2a9dbc3d2cdb7aaaf1808098691849549ba90dcf674072cd963e8b5970@172.16.239.16:30303?discport=0","enode://6d2e35fabdc0b0aa79649920632ae0f71cfc3ffc18cb4770ce7259022796f75fd4a60b8436a15444cba8f983417b9fdc896aedc8f5e4a9861a1c2ec3cff1cf39@172.16.239.17:30303?discport=0","enode://17af7454def430c419f16784bba815c053841fe7f7200ee001a325202c880a2b21c2f271d11b78924659f5bc05335a920e3927a935a52fedd7e3b4465147264e@172.16.239.18:30303?discport=0","enode://bfcdd4bbaa2e8056729ca5b0c582fd88b5ab343d310d5f0a44d69e4b82f26e91c8bcea85b800021fb9333585a3b9203133f65de884a43387d3a81be5240231f6@172.16.239.19:30303?discport=0"]' > /eth/geth/static-nodes.json
        geth --datadir "/eth" init "/eth/genesis.json"
        geth \
        --identity "validator-9" \
        --rpc \
        --rpcaddr "0.0.0.0" \
        --rpcport "8545" \
        --rpccorsdomain "*" \
        --datadir "/eth" \
        --port "30303" \
        --rpcapi "db,eth,net,web3,istanbul,personal" \
        --networkid "2017" \
        --nat "any" \
        --nodekeyhex "b2a9b98685e5aee3ec7efd0e7287fb0440170845e4671ea4c044ea6544fe7603" \
        --mine \
        --debug \
        --metrics \
        --syncmode "full" \
        --ethstats "validator-9:bb98a0b6442386d0cdf8a31b267892c1@172.16.239.9:3000" \
        --gasprice 0
    networks:
      app_net:
        ipv4_address: 172.16.239.19
    restart: always
  constellation-9:
    hostname: constellation-9
    image: quorumengineering/constellation:latest
    ports:
      - '10009:10009'
    volumes:
      - 9:/constellation:z
      - .:/tmp/
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /constellation
        echo "socket=\"/constellation/tm.ipc\"\npublickeys=[\"/constellation/tm.pub\"]\n" > /constellation/tm.conf
        constellation-node --generatekeys=/constellation/tm
        cp /constellation/tm.pub /tmp/tm9.pub
        constellation-node \
          --url=http://172.16.239.109:10009/ \
          --port=10009 \
          --socket=/constellation/tm.ipc \
          --othernodes=http://172.16.239.100:10000/,http://172.16.239.101:10001/,http://172.16.239.102:10002/,http://172.16.239.103:10003/,http://172.16.239.104:10004/,http://172.16.239.105:10005/,http://172.16.239.106:10006/,http://172.16.239.107:10007/,http://172.16.239.108:10008/ \
          --publickeys=/constellation/tm.pub \
          --privatekeys=/constellation/tm.key \
          --storage=/constellation \
          --verbosity=4
    networks:
      app_net:
        ipv4_address: 172.16.239.109
    restart: always
networks:
  app_net:
    driver: bridge
    ipam:
      driver: default
      config:
      - subnet: 172.16.239.0/24
volumes:
  "0":
  "1":
  "2":
  "3":
  "4":
  "5":
  "6":
  "7":
  "8":
  "9":

